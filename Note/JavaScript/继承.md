# ç»§æ‰¿

::: info æ¦‚å¿µ
è¯´åˆ°ç»§æ‰¿çš„æ¦‚å¿µï¼Œé¦–å…ˆè¦è¯´ä¸€ä¸ªç»å…¸çš„ä¾‹å­ã€‚

å…ˆå®šä¹‰ä¸€ä¸ªç±»ï¼ˆClassï¼‰å«æ±½è½¦ï¼Œæ±½è½¦çš„å±æ€§åŒ…æ‹¬é¢œè‰²ã€è½®èƒã€å“ç‰Œã€é€Ÿåº¦ã€æ’æ°”é‡ç­‰ï¼Œç”±æ±½è½¦è¿™ä¸ªç±»å¯ä»¥æ´¾ç”Ÿå‡ºâ€œè½¿è½¦â€å’Œâ€œè´§è½¦â€ä¸¤ä¸ªç±»ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æ±½è½¦çš„åŸºç¡€å±æ€§ä¸Šï¼Œä¸ºè½¿è½¦æ·»åŠ ä¸€ä¸ªåå¤‡å¢ã€ç»™è´§è½¦æ·»åŠ ä¸€ä¸ªå¤§è´§ç®±ã€‚è¿™æ ·è½¿è½¦å’Œè´§è½¦å°±æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯äºŒè€…éƒ½å±äºæ±½è½¦è¿™ä¸ªç±»ï¼Œè¿™æ ·ä»è¿™ä¸ªä¾‹å­ä¸­å°±èƒ½è¯¦ç»†è¯´æ˜æ±½è½¦ã€è½¿è½¦ä»¥åŠå¡è½¦ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ã€‚

ç»§æ‰¿å¯ä»¥ä½¿å¾—å­ç±»åˆ«å…·æœ‰çˆ¶ç±»çš„å„ç§æ–¹æ³•å’Œå±æ€§ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­â€œè½¿è½¦â€ å’Œ â€œè´§è½¦â€ åˆ†åˆ«ç»§æ‰¿äº†æ±½è½¦çš„å±æ€§ï¼Œè€Œä¸éœ€è¦å†æ¬¡åœ¨â€œè½¿è½¦â€ä¸­å®šä¹‰æ±½è½¦å·²ç»æœ‰çš„å±æ€§ã€‚åœ¨â€œè½¿è½¦â€ç»§æ‰¿â€œæ±½è½¦â€çš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥é‡æ–°å®šä¹‰æ±½è½¦çš„æŸäº›å±æ€§ï¼Œå¹¶é‡å†™æˆ–è¦†ç›–æŸäº›å±æ€§å’Œæ–¹æ³•ï¼Œä½¿å…¶è·å¾—ä¸â€œæ±½è½¦â€è¿™ä¸ªçˆ¶ç±»ä¸åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚
:::

## ES5 å®ç°ç»§æ‰¿

### åŸå‹é“¾ç»§æ‰¿

```js
function Parent() {
  this.name = 'parent';
  this.arr = [1, 2, 3];
  this.say = function () {
    console.log('say');
  };
}

Parent.prototype.cb = function () {
  console.log('prototype-cb');
};

function Child() {
  this.type = 'Child';
}

Child.prototype = new Parent();

var child1 = new Child();
var child2 = new Child();

child1.arr.push(55);

console.log(child1.arr, child2.arr);
```

åŸå‹é“¾ç»§æ‰¿æ˜¯æ¯”è¾ƒå¸¸è§çš„ç»§æ‰¿æ–¹å¼ä¹‹ä¸€ï¼Œå…¶ä¸­æ¶‰åŠçš„æ„é€ å‡½æ•°ã€åŸå‹å’Œå®ä¾‹ï¼Œä¸‰è€…ä¹‹é—´å­˜åœ¨ç€ä¸€å®šçš„å…³ç³»ï¼Œå³æ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡åˆåŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹åˆ™åŒ…å«ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æŒ‡é’ˆã€‚

> è™½ç„¶çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§éƒ½èƒ½å¤Ÿè®¿é—®ï¼Œä½†å…¶å®æœ‰ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œæ˜æ˜æˆ‘åªæ”¹å˜äº† child1 çš„ arr å±æ€§ï¼Œä¸ºä»€ä¹ˆ child2 ä¹Ÿè·Ÿç€å˜äº†å‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºä¸¤ä¸ªå®ä¾‹ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªåŸå‹å¯¹è±¡ã€‚å®ƒä»¬çš„å†…å­˜ç©ºé—´æ˜¯å…±äº«çš„ï¼Œå½“ä¸€ä¸ªå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿéšä¹‹è¿›è¡Œäº†å˜åŒ–ï¼Œè¿™å°±æ˜¯ä½¿ç”¨åŸå‹é“¾ç»§æ‰¿æ–¹å¼çš„ä¸€ä¸ªç¼ºç‚¹ã€‚

### æ„é€ å‡½æ•°ç»§æ‰¿

```js
function Parent() {
  this.name = 'parent';
  this.arr = [1, 2, 3];
  this.say = function () {
    console.log('say');
  };
}

Parent.prototype.cb = function () {
  console.log('prototype-cb');
};

function Child() {
  Parent.call(this);
  this.type = 'Child';
}

var child = new Child();

console.log(child); //æ²¡é—®é¢˜
console.log(child.cb()); //æŠ¥é”™
```

å¯ä»¥çœ‹åˆ°æœ€åæ‰“å°çš„ child åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼Œé™¤äº† Child çš„å±æ€§ type ä¹‹å¤–ï¼Œä¹Ÿç»§æ‰¿äº† Parent çš„å±æ€§ nameï¼Œarrï¼Œsayã€‚

è¿™æ ·å†™çš„æ—¶å€™å­ç±»èƒ½å¤Ÿæ‹¿åˆ°çˆ¶ç±»çš„å±æ€§å€¼ï¼Œå¹¶ä¸”è§£å†³äº†ç¬¬ä¸€ç§ç»§æ‰¿æ–¹å¼çš„å¼Šç«¯ï¼Œä¸ºå•¥è§£å†³äº†ï¼Ÿå› ä¸ºå‹æ ¹å°±æ²¡ç»§æ‰¿çˆ¶ç±»çš„åŸå‹å¯¹è±¡ ğŸ˜…ã€‚

> é—®é¢˜ï¼šçˆ¶ç±»åŸå‹å¯¹è±¡ä¸­ä¸€æ—¦å­˜åœ¨çˆ¶ç±»ä¹‹å‰è‡ªå·±å®šä¹‰çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»å°†æ— æ³•ç»§æ‰¿è¿™äº›æ–¹æ³•ã€‚

### ç»„åˆç»§æ‰¿

```js
function Parent() {
  this.name = 'parent';
  this.arr = [1, 2, 3];
  this.say = function () {
    console.log('say');
  };
}

Parent.prototype.cb = function () {
  console.log('prototype-cb');
};

function Child() {
  // äºŒæ¬¡è°ƒç”¨Parent
  Parent.call(this);
  this.type = 'Child';
}

//é¦–æ¬¡è°ƒç”¨Parent
Child.prototype = new Parent();
// æ‰‹åŠ¨ä¿®æ”¹constructorï¼ŒæŒ‡å›Child
Child.prototype.constructor = Child;

var child1 = new Child();
var child2 = new Child();

child1.arr.push(55);

console.log(child1.arr, child2.arr); //äº’ä¸å½±å“

console.log(child1.cb()); //æ­£å¸¸è¾“å‡ºprototype-cb
console.log(child2.cb()); //æ­£å¸¸è¾“å‡ºprototype-cb
```

> é—®é¢˜ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Parent æ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯æ”¹å˜ Child çš„ prototype çš„æ—¶å€™ï¼Œç¬¬äºŒæ¬¡æ˜¯é€šè¿‡ call æ–¹æ³•è°ƒç”¨ Parent çš„æ—¶å€™ï¼Œé‚£ä¹ˆ Parent å¤šæ„é€ ä¸€æ¬¡å°±å¤šè¿›è¡Œäº†ä¸€æ¬¡æ€§èƒ½å¼€é”€ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æ„¿çœ‹åˆ°çš„ã€‚

### åŸå‹å¼ç»§æ‰¿

ES5 é‡Œé¢çš„ [Object.create](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create) æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€æ˜¯ç”¨ä½œæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡ã€äºŒæ˜¯ä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡ï¼ˆå¯é€‰å‚æ•°ï¼‰ã€‚

```js
let Parent = {
  name: 'Parent',

  friends: ['p1', 'p2', 'p3'],

  getName: function () {
    return this.name;
  },
};

let person = Object.create(Parent);

person.name = 'tom';

person.friends.push('jerry');

let person1 = Object.create(Parent);

person1.friends.push('lucy');

console.log(person.name); //tom

console.log(person.name === person.getName()); //true

console.log(person1.name); //Parent

console.log(person.friends); //["p1","p2","p3","jerry","lucy"]

console.log(person1.friends); //["p1","p2","p3","jerry","lucy"]
```

é€šè¿‡ Object.create è¿™ä¸ªæ–¹æ³•å¯ä»¥å®ç°æ™®é€šå¯¹è±¡çš„ç»§æ‰¿ï¼Œä¸ä»…ä»…èƒ½ç»§æ‰¿å±æ€§ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç»§æ‰¿ getName æ–¹æ³•ã€‚

ç¬¬ä¸€ä¸ªç»“æœâ€œtomâ€ï¼Œæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œperson ç»§æ‰¿äº† Parent çš„ name å±æ€§ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šåˆè¿›è¡Œäº†è‡ªå®šä¹‰ã€‚

ç¬¬äºŒä¸ªæ˜¯ç»§æ‰¿è¿‡æ¥çš„ getName æ–¹æ³•æ£€æŸ¥è‡ªå·±çš„ name æ˜¯å¦å’Œå±æ€§é‡Œé¢çš„å€¼ä¸€æ ·ï¼Œç­”æ¡ˆæ˜¯ trueã€‚

ç¬¬ä¸‰ä¸ªç»“æœâ€œParentâ€ä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œperson1 ç»§æ‰¿äº† Parent çš„ name å±æ€§ï¼Œæ²¡æœ‰è¿›è¡Œè¦†ç›–ï¼Œå› æ­¤è¾“å‡ºçˆ¶å¯¹è±¡çš„å±æ€§ã€‚

> é—®é¢˜ï¼šå¤šä¸ªå®ä¾‹çš„å¼•ç”¨ç±»å‹å±æ€§æŒ‡å‘ç›¸åŒçš„å†…å­˜ï¼Œå­˜åœ¨ç¯¡æ”¹çš„å¯èƒ½ã€‚

### å¯„ç”Ÿå¼ç»§æ‰¿

ä½¿ç”¨åŸå‹å¼ç»§æ‰¿å¯ä»¥è·å¾—ä¸€ä»½ç›®æ ‡å¯¹è±¡çš„æµ…æ‹·è´ï¼Œç„¶ååˆ©ç”¨è¿™ä¸ªæµ…æ‹·è´çš„èƒ½åŠ›å†è¿›è¡Œå¢å¼ºï¼Œæ·»åŠ ä¸€äº›æ–¹æ³•ï¼Œè¿™æ ·çš„ç»§æ‰¿æ–¹å¼å°±å«ä½œå¯„ç”Ÿå¼ç»§æ‰¿ã€‚

è™½ç„¶å…¶ä¼˜ç¼ºç‚¹å’ŒåŸå‹å¼ç»§æ‰¿ä¸€æ ·ï¼Œä½†æ˜¯å¯¹äºæ™®é€šå¯¹è±¡çš„ç»§æ‰¿æ–¹å¼æ¥è¯´ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿ç›¸æ¯”äºåŸå‹å¼ç»§æ‰¿ï¼Œè¿˜æ˜¯åœ¨çˆ¶ç±»åŸºç¡€ä¸Šæ·»åŠ äº†æ›´å¤šçš„æ–¹æ³•ã€‚

```js
let Parent = {
  name: 'Parent',

  friends: ['p1', 'p2', 'p3'],

  getName: function () {
    return this.name;
  },
};

function clone(origin) {
  let clone = Object.create(origin);

  clone.getFriends = function () {
    return this.friends;
  };

  return clone;
}

let person = clone(Parent);

let person1 = clone(Parent);

console.log(person.getName());

console.log(person.getFriends());

person.friends.push('æˆ‘åœ¨ä¸¤ä¸ªå®ä¾‹ä¸Šéƒ½è¢«åŠ è¿›å»äº†');

console.log(person.friends); //['p1', 'p2', 'p3','æˆ‘åœ¨ä¸¤ä¸ªå®ä¾‹ä¸Šéƒ½è¢«åŠ è¿›å»äº†']

// person1 æ­¤æ—¶çš„friends å±æ€§æœ¬ä¸è¯¥æœ‰æ­¤å€¼('æˆ‘åœ¨ä¸¤ä¸ªå®ä¾‹ä¸Šéƒ½è¢«åŠ è¿›å»äº†')
console.log(person1.friends); //['p1', 'p2', 'p3','æˆ‘åœ¨ä¸¤ä¸ªå®ä¾‹ä¸Šéƒ½è¢«åŠ è¿›å»äº†']
```

person æ˜¯é€šè¿‡å¯„ç”Ÿå¼ç»§æ‰¿ç”Ÿæˆçš„å®ä¾‹ï¼Œå®ƒä¸ä»…ä»…æœ‰ getName çš„æ–¹æ³•ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°å®ƒæœ€åä¹Ÿæ‹¥æœ‰äº† getFriends çš„æ–¹æ³•ã€‚person é€šè¿‡ clone çš„æ–¹æ³•ï¼Œå¢åŠ äº† getFriends çš„æ–¹æ³•ï¼Œä»è€Œä½¿ person è¿™ä¸ªæ™®é€šå¯¹è±¡åœ¨ç»§æ‰¿è¿‡ç¨‹ä¸­åˆå¢åŠ äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™æ ·çš„ç»§æ‰¿æ–¹å¼å°±æ˜¯å¯„ç”Ÿå¼ç»§æ‰¿ã€‚

é—®é¢˜ï¼šä¼˜ç¼ºç‚¹å’ŒåŸå‹å¼ç»§æ‰¿ä¸€æ ·ï¼Œä½†æ˜¯å¯¹äºæ™®é€šå¯¹è±¡çš„ç»§æ‰¿æ–¹å¼æ¥è¯´ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿ç›¸æ¯”äºåŸå‹å¼ç»§æ‰¿ï¼Œè¿˜æ˜¯åœ¨çˆ¶ç±»åŸºç¡€ä¸Šæ·»åŠ äº†æ›´å¤šçš„æ–¹æ³•ã€‚

### å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿

ç»“åˆåŸå‹å¼ç»§æ‰¿ä¸­æåŠçš„ç»§æ‰¿æ–¹å¼ï¼Œè§£å†³æ™®é€šå¯¹è±¡çš„ç»§æ‰¿é—®é¢˜çš„ Object.create æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨å‰é¢è¿™å‡ ç§ç»§æ‰¿æ–¹å¼çš„ä¼˜ç¼ºç‚¹åŸºç¡€ä¸Šè¿›è¡Œæ”¹é€ ï¼Œå¾—å‡ºäº†å¯„ç”Ÿç»„åˆå¼çš„ç»§æ‰¿æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯æ‰€æœ‰ç»§æ‰¿æ–¹å¼é‡Œé¢ç›¸å¯¹æœ€ä¼˜çš„ç»§æ‰¿æ–¹å¼

```js
function clone(parent, child) {
  // è¿™é‡Œæ”¹ç”¨ Object.create å°±å¯ä»¥å‡å°‘ç»„åˆç»§æ‰¿ä¸­å¤šè¿›è¡Œä¸€æ¬¡æ„é€ çš„è¿‡ç¨‹
  child.prototype = Object.create(parent.prototype);

  child.prototype.constructor = child;
}

function Parent(name) {
  this.name = name;
  this.arr = [1, 2, 3];
  this.say = function () {
    console.log('say');
  };
}

Parent.prototype.getName = function () {
  return this.name;
};

function Child(name) {
  Parent.call(this, name);
  this.type = 'child';
}

clone(Parent, Child);

Child.prototype.getType = function () {
  return this.type;
};

var childInstance = new Child('çˆ¶ç±»');

console.log(childInstance.getName()); //çˆ¶ç±»
console.log(childInstance.getType()); //child
```

> å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ–¹å¼ï¼ŒåŸºæœ¬å¯ä»¥è§£å†³å‰å‡ ç§ç»§æ‰¿æ–¹å¼çš„ç¼ºç‚¹ï¼Œè¾ƒå¥½åœ°å®ç°äº†ç»§æ‰¿æƒ³è¦çš„ç»“æœï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†æ„é€ æ¬¡æ•°ï¼Œå‡å°‘äº†æ€§èƒ½çš„å¼€é”€ã€‚

## ES6 å®ç°ç»§æ‰¿

ES6 çš„ç»§æ‰¿æ–¹å¼ï¼Œé€šè¿‡ extends å…³é”®å­—å®ç°ï¼Œé€šè¿‡ super å…³é”®å­—è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ã€‚

```js
class Person {
  constructor(name, gender) {
    this.name = name;
    this.gender = gender;
  }
  eat() {
    console.log('éƒ½ä¼šåƒ');
  }
}

// Chineseç»§æ‰¿äº†Person  extendsç»§æ‰¿è¯­æ³•
class Chinese extends Person {
  constructor(name, gender) {
    // super ä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
    super(name, gender);
    this.skin = 'yellow';
  }
  pingpong() {
    console.log('æ‰“ä¹’ä¹“çƒ');
  }
}

const c1 = new Chinese('ç‹äº”', 18);
console.log(c1);
c1.eat();
c1.pingpong();
```
